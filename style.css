:root {
    --bg-color: #ffffff;
    --card-width: 60px;
    --card-height: 84px;
    --card-gap: 10px;
    --primary-color: #1d4ed8; /* Darker Blue for AA Contrast (was #3b82f6) */
    --confirm-color: #15803d; /* Darker Green for AA Contrast (was #22c55e) */
    --focus-outline: 3px solid #f59e0b; /* Orange focus ring */
    --active-player-color: #22c55e; /* Green for active player outline */
}

body {
    margin: 0;
    padding: 0;
    font-family: 'Comic Sans MS', 'Chalkboard SE', sans-serif; /* Sketchy feel */
    background-color: var(--bg-color);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    user-select: none;
}

/* Accessibility: Focus Styles */
:focus-visible {
    outline: var(--focus-outline);
    outline-offset: 2px;
}

#game-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    max-width: 1000px;
    padding: 20px;
}

#game-header {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
    align-items: center;
    flex-wrap: wrap;
    justify-content: center;
}

.logo {
    border: 2px solid var(--primary-color);
    color: var(--primary-color);
    padding: 5px 20px;
    border-radius: 10px;
    font-weight: bold;
    font-size: 1.2em;
    margin: 0; /* Reset h1 margin */
}

#player-scores {
    display: flex;
    gap: 10px;
}

.player-score {
    border: 2px solid var(--primary-color);
    color: var(--primary-color);
    padding: 5px 10px;
    border-radius: 5px;
    font-weight: bold;
    min-width: 60px;
    text-align: center;
}

#round-tracker {
    font-weight: bold;
    color: #333;
}

.game-layout {
    display: grid;
    grid-template-areas:
        ".        player3  ."
        "player2  center   player4"
        ".        player1  .";
    gap: 40px;
    justify-items: center;
    align-items: center;
    width: 100%;
    grid-template-columns: 1fr auto 1fr;
    grid-template-rows: 1fr auto 1fr;
}

.player-area {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    padding: 10px;
    border-radius: 15px;
    transition: box-shadow 0.3s ease;
    border: 2px solid transparent; /* Reserve space for border */
}

/* Active Player Indication */
.player-area.active-turn {
    border-color: var(--active-player-color);
    box-shadow: 0 0 15px rgba(34, 197, 94, 0.3);
}

.player-label {
    font-size: 1.5em;
    font-weight: bold;
    color: #333;
    margin: 0; /* Reset h2 margin */
}

/* Grid Positioning */
#player-1 { grid-area: player1; }
#player-2 { grid-area: player2; }
#player-3 { grid-area: player3; }
#player-4 { grid-area: player4; }
#center-area { grid-area: center; }

/* Rotations for Players facing center */
#player-2 {
    transform: rotate(90deg);
}
/* Counter-rotate label so it's readable? Or keep it rotated? 
   Sketch shows P2 text is upright relative to page, but cards are rotated.
   Actually sketch shows "P2" text upright.
   Let's rotate the CONTAINER, then counter-rotate the label.
*/
#player-2 .player-label {
    transform: rotate(-90deg);
    margin-bottom: 10px; /* Adjust spacing after rotation */
}

#player-3 {
    transform: rotate(180deg);
}
#player-3 .player-label {
    transform: rotate(-180deg);
    order: 2; /* Put label at "bottom" visually (which is top of rotated div) */
    margin-top: 10px;
}

#player-4 {
    transform: rotate(-90deg);
}
#player-4 .player-label {
    transform: rotate(90deg);
    margin-bottom: 10px;
}


.cards-container {
    display: grid;
    gap: var(--card-gap);
    /* Standardize ALL players to 3x2 grid */
    grid-template-columns: repeat(3, var(--card-width));
    grid-template-rows: repeat(2, var(--card-height));
}

/* Remove old specific grid overrides since we are rotating the container instead */
.top .cards-container, .bottom .cards-container,
.left .cards-container, .right .cards-container {
     grid-template-columns: repeat(3, var(--card-width));
     grid-template-rows: repeat(2, var(--card-height));
}


/* Card Styling */
.card {
    width: var(--card-width);
    height: var(--card-height);
    border: 2px solid var(--primary-color);
    border-radius: 8px;
    background-color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 1.2em;
    cursor: pointer;
    box-sizing: border-box;
    transition: transform 0.2s, box-shadow 0.2s;
}

.card.face-down {
    background-image: repeating-linear-gradient(
        45deg,
        #e0f2fe 0,
        #e0f2fe 2px,
        #fff 2px,
        #fff 4px
    );
    color: transparent;
}

.card.face-up {
    background-color: white;
    font-weight: bold;
}

.card.red { color: red; }
.card.black { color: black; }

.card.selected {
    box-shadow: 0 0 15px var(--confirm-color); /* Green glow */
    transform: scale(1.1);
    border-color: var(--confirm-color);
    z-index: 10;
}

/* Center Area */
#center-area {
    display: flex;
    gap: 40px; 
    align-items: center;
    justify-content: center;
    min-width: 250px;
    position: relative;
    padding: 20px;
}

.card-pile {
    width: var(--card-width);
    height: var(--card-height);
    border: 2px dashed #ccc;
    border-radius: 8px;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    background-color: rgba(255,255,255,0.5);
    cursor: pointer;
}

/* Accessibility Focus for Piles */
.card-pile:focus-visible {
    outline: var(--focus-outline);
    outline-offset: 4px;
}

#deck .card-back {
    width: 100%;
    height: 100%;
    border-radius: 6px;
    background-color: var(--primary-color);
    background-image: repeating-linear-gradient(
        45deg,
        #e0f2fe 0,
        #e0f2fe 2px,
        #1d4ed8 2px, /* Updated to match new primary color var */
        #1d4ed8 4px
    );
    border: 2px solid var(--primary-color);
}

#action-area {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 20;
    pointer-events: none; 
}

#action-area:not(.hidden) {
    pointer-events: auto;
}

.hidden {
    display: none !important;
}

#confirm-btn {
    background-color: var(--confirm-color);
    color: white;
    border: 2px solid #14532d; /* Darker green border */
    padding: 12px 24px;
    border-radius: 25px; 
    font-size: 1.2em;
    cursor: pointer;
    font-weight: bold;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: transform 0.1s, background-color 0.2s;
}

#confirm-btn:hover {
    background-color: #16a34a;
    transform: scale(1.05);
}

#confirm-btn:active {
    transform: scale(0.95);
}
